<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Input Transaksi Kas</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f4f6f8;
      color: #1f2933;
    }
    .page-header {
      padding: 28px 24px 12px;
      background: #ffffff;
      box-shadow: 0 4px 16px rgba(15, 23, 42, 0.08);
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 16px;
    }
    .page-header h1 {
      margin: 0;
      font-size: 24px;
    }
    .page-header p {
      margin: 6px 0 0;
      color: #6b7280;
    }
    .back-btn {
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      font-weight: 600;
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: #fff;
      cursor: pointer;
      box-shadow: 0 10px 18px rgba(239, 68, 68, 0.25);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    .back-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 24px rgba(239, 68, 68, 0.28);
    }
    .wrap {
      max-width: 640px;
      margin: 32px auto 40px;
      padding: 0 24px 48px;
    }
    .card {
      background: #ffffff;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
    }
    h1 {
      margin: 0 0 4px;
      font-size: 22px;
    }
    p {
      margin: 0 0 18px;
      color: #6b7280;
      font-size: 14px;
    }
    label {
      display: block;
      margin: 14px 0 6px;
      font-size: 13px;
      font-weight: 600;
    }
    input, select {
      width: 35%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #d4d6dd;
      font-size: 14px;
      background: #fff;
    }
    button {
      margin-top: 20px;
      padding: 11px 18px;
      border-radius: 999px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
    }
    .small {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <header class="page-header">
    <div>
      <h1>Input Transaksi Kas</h1>
      <p>Gunakan form ini untuk mencatat transaksi kas masuk/keluar sebagai bahan entry jurnal.</p>
    </div>
    <button class="back-btn" type="button" onclick="window.history.back()">Kembali</button>
  </header>
  <div class="wrap">
    <div class="card">

      <form id="formKas">
        <label for="tanggal">Tanggal Transaksi</label>
        <input id="tanggal" type="date" required />

        <label for="jenis">Jenis Transaksi</label>
        <select id="jenis" required>
          <option value="">Pilih jenis transaksi</option>
          <option value="kas-masuk">Kas Masuk</option>
          <option value="kas-keluar">Kas Keluar</option>
        </select>

        <div id="kasMasukFields" style="display:none;">
          <label for="kasMasukSumber">Kas Masuk dari</label>
          <select id="kasMasukSumber">
            <option value="">Pilih sumber kas masuk</option>
            <option value="2301">2301 Booking Fee</option>
            <option value="2302">2302 Uang Muka DP</option>
            <option value="2303">2303 Uang Muka Pelanggan Kelebihan Bayar</option>
            <option value="2304">2304 Titipan Pelanggan (jika ada skema titipan)</option>
            <option value="4101">4101 Penjualan Unit Rumah Cash</option>
            <option value="4102">4102 Penjualan Kavling Tanah</option>
            <option value="4103">4103 Penjualan Upgrade/Perubahan Spesifikasi</option>
            <option value="1201">1201 Piutang Usaha Retensi Bank/SBUM</option>
            <option value="1202">1202 Piutang KPR/Subsidi</option>
            <option value="4201">4201 Pendapatan Lain-lain Proyek</option>
            <option value="4202">4202 Pendapatan Sewa Lahan/Tempat</option>
            <option value="4203">4203 Pendapatan Layanan/Utilitas</option>
            <option value="4204">4204 Pendapatan Denda Keterlambatan</option>
            <option value="3101">3101 Modal Disetor</option>
            <option value="2105">2105 Pinjaman Bank ? Konstruksi</option>
            <option value="2106">2106 Pinjaman Investor/Partner</option>
            <option value="2107">2107 Pinjaman Pemegang Saham</option>
          </select>
        </div>

        <div id="kasMasukDetail" style="display:none;">
          <label for="kasMasukJumlah">Jumlah (Rp)</label>
          <input id="kasMasukJumlah" type="number" min="0" step="1000" placeholder="Masukkan nominal" />

          <label for="kasMasukBank">Transfer dari</label>
          <select id="kasMasukBank">
            <option value="">Pilih bank pengirim</option>
            <option value="BRI 006401001615303">BRI 006401001615303</option>
            <option value="BRI 006401001622300">BRI 006401001622300</option>
            <option value="BRI 022401001933307">BRI 022401001933307</option>
            <option value="BRI 022401070785561">BRI 022401070785561</option>
          </select>

          <label for="kasMasukKet">Keterangan (maks. 500 huruf)</label>
          <textarea id="kasMasukKet" maxlength="500" placeholder="Tambahkan informasi tambahan jika diperlukan" style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #d4d6dd;font-size:14px;height:90px;"></textarea>

          <label for="kasMasukBukti">Upload Bukti Transfer</label>
          <input id="kasMasukBukti" type="file" accept="image/*,.pdf" />
        </div>

        <div id="kasKeluarFields" style="display:none;">
          <label for="kasKeluarAkun">Kas Keluar ke</label>
          <select id="kasKeluarAkun">
            <option value="">Pilih akun tujuan kas keluar</option>
            <option value="1101">1101 Kas Kecil (Petty Cash)</option>
            <option value="1102">1102 Kas Operasional Proyek</option>
            <option value="1111">1111 Bank Operasional</option>
            <option value="1112">1112 Bank Proyek (rekening khusus proyek)</option>
            <option value="1113">1113 Bank Escrow</option>
            <option value="1302">1302 Persediaan Material Bangunan</option>
            <option value="1401">1401 WIP – Biaya Konstruksi</option>
            <option value="2101">2101 Hutang Usaha – Kontraktor/Subkon</option>
            <option value="1402">1402 WIP – Biaya Infrastruktur</option>
            <option value="1403">1403 WIP – Perizinan & Legal Proyek</option>
            <option value="6102">6102 Beban Gaji Proyek</option>
            <option value="6102.01">6102.01 Gaji Staf Lapangan</option>
            <option value="6102.02">6102.02 Gaji Administrasi Umum</option>
            <option value="6103">6103 Beban Administrasi & Umum Proyek</option>
            <option value="6101">6101 Beban Pemasaran & Komisi</option>
            <option value="2201">2201 Hutang Pajak PPN</option>
            <option value="2202">2202 Hutang Pajak – PPh Final 4(2)</option>
            <option value="6100">6100 Beban Pajak</option>
            <option value="2203">2203 Hutang Pajak Lainnya</option>
            <option value="2105">2105 Pinjaman Bank – Konstruksi</option>
            <option value="2106">2106 Pinjaman Investor/Partner</option>
            <option value="6106">6106 Beban Bunga</option>
            <option value="1404">1404 Biaya Pendanaan Proyek (opsional)</option>
          </select>

          <label for="kasKeluarJumlah">Jumlah (Rp)</label>
          <input id="kasKeluarJumlah" type="number" min="0" step="1000" placeholder="Masukkan nominal" />

          <label for="kasKeluarKet">Keterangan (maks. 500 huruf)</label>
          <textarea id="kasKeluarKet" maxlength="500" placeholder="Tambahkan informasi tambahan jika diperlukan" style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #d4d6dd;font-size:14px;height:90px;"></textarea>

          <label for="kasKeluarBukti">Upload Bukti Pengeluaran</label>
          <input id="kasKeluarBukti" type="file" accept="image/*,.pdf" />
        </div>

        <button type="submit">Simpan</button>
        <div class="small">Validasi: tanggal wajib diisi dan jenis transaksi harus dipilih.</div>
      </form>
    </div>
  </div>

  <div class="wrap">
    <div class="card">
      <h2>Preview Input Terakhir</h2>
      <table style="width:100%;border-collapse:collapse;">
        <thead>
          <tr>
            <th style="text-align:left;border-bottom:1px solid #ececec;padding:8px;">Field</th>
            <th style="text-align:left;border-bottom:1px solid #ececec;padding:8px;">Nilai</th>
          </tr>
        </thead>
        <tbody id="previewBody">
          <tr><td colspan="2" style="padding:8px;color:#94a3b8;">Belum ada input.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    const jenisSelect = document.getElementById("jenis");
    const kasMasukFields = document.getElementById("kasMasukFields");
    const kasMasukDetail = document.getElementById("kasMasukDetail");
    const kasMasukSumber = document.getElementById("kasMasukSumber");
    const kasMasukJumlah = document.getElementById("kasMasukJumlah");
    const kasMasukBank = document.getElementById("kasMasukBank");

    const kasKeluarFields = document.getElementById("kasKeluarFields");
    const kasKeluarAkun = document.getElementById("kasKeluarAkun");
    const kasKeluarJumlah = document.getElementById("kasKeluarJumlah");
    const kasKeluarKet = document.getElementById("kasKeluarKet");
    const kasKeluarBukti = document.getElementById("kasKeluarBukti");

    jenisSelect.addEventListener("change", function () {
      if (this.value === "kas-masuk") {
        kasMasukFields.style.display = "block";
        if (kasMasukSumber.value) {
          kasMasukDetail.style.display = "block";
        }
        kasKeluarFields.style.display = "none";
        kasKeluarAkun.value = "";
        kasKeluarJumlah.value = "";
        kasKeluarKet.value = "";
        kasKeluarBukti.value = "";
      } else {
        kasMasukFields.style.display = "none";
        kasMasukDetail.style.display = "none";
        kasMasukSumber.value = "";
        kasMasukJumlah.value = "";
        kasMasukBank.value = "";
        document.getElementById("kasMasukKet").value = "";
        kasMasukBukti.value = "";
        if (this.value === "kas-keluar") {
          kasKeluarFields.style.display = "block";
        } else {
          kasKeluarFields.style.display = "none";
          kasKeluarAkun.value = "";
          kasKeluarJumlah.value = "";
          kasKeluarKet.value = "";
          kasKeluarBukti.value = "";
        }
      }
    });

    kasMasukSumber.addEventListener("change", function () {
      if (this.value) {
        kasMasukDetail.style.display = "block";
      } else {
        kasMasukDetail.style.display = "none";
        kasMasukJumlah.value = "";
        kasMasukBank.value = "";
        document.getElementById("kasMasukKet").value = "";
        kasMasukBukti.value = "";
      }
    });

    document.getElementById("formKas").addEventListener("submit", function (e) {
      e.preventDefault();
      const tanggal = document.getElementById("tanggal").value;
      const jenis = jenisSelect.value;
      if (!tanggal || !jenis) return;

      let info = "";
      if (jenis === "kas-masuk") {
        if (!kasMasukSumber.value) {
          alert("Pilih sumber kas masuk terlebih dahulu.");
          return;
        }
        if (!kasMasukJumlah.value || Number(kasMasukJumlah.value) <= 0) {
          alert("Masukkan jumlah kas masuk yang valid.");
          return;
        }
        if (!kasMasukBank.value) {
          alert("Pilih akun/bank asal transfer.");
          return;
        }
        info =
          "\nKas masuk dari: " + kasMasukSumber.options[kasMasukSumber.selectedIndex].text +
          "\nJumlah: Rp " + Number(kasMasukJumlah.value).toLocaleString("id-ID") +
          "\nTransfer dari: " + kasMasukBank +
          (document.getElementById("kasMasukKet").value ? ("\nKeterangan: " + document.getElementById("kasMasukKet").value) : "");
      } else if (jenis === "kas-keluar") {
        if (!kasKeluarAkun.value) {
          alert("Pilih akun tujuan kas keluar.");
          return;
        }
        if (!kasKeluarJumlah.value || Number(kasKeluarJumlah.value) <= 0) {
          alert("Masukkan jumlah kas keluar yang valid.");
          return;
        }
        info =
          "\nKas keluar ke: " + kasKeluarAkun.options[kasKeluarAkun.selectedIndex].text +
          "\nJumlah: Rp " + Number(kasKeluarJumlah.value).toLocaleString("id-ID") +
          (kasKeluarKet.value ? ("\nKeterangan: " + kasKeluarKet.value) : "");
      }

      updatePreview({
        tanggal,
        jenis,
        sumber: kasMasukSumber.value ? kasMasukSumber.options[kasMasukSumber.selectedIndex].text : "-",
        jumlah: kasMasukJumlah.value ? Number(kasMasukJumlah.value).toLocaleString("id-ID") : "-",
        bank: kasMasukBank.value || "-",
        keterangan: jenis === "kas-masuk" ? (document.getElementById("kasMasukKet").value || "-") : (kasKeluarKet.value || "-"),
        bukti: jenis === "kas-masuk"
          ? (kasMasukBukti.files[0] ? kasMasukBukti.files[0].name : "-")
          : (kasKeluarBukti.files[0] ? kasKeluarBukti.files[0].name : "-")
      });

      alert("Transaksi tersimpan:\nTanggal: " + tanggal + "\nJenis: " + jenis.replace("-", " ") + info);
      e.target.reset();
      kasMasukFields.style.display = "none";
      kasMasukDetail.style.display = "none";
      kasMasukSumber.value = "";
      kasMasukJumlah.value = "";
      kasMasukBank.value = "";
      document.getElementById("kasMasukKet").value = "";
      kasMasukBukti.value = "";
      kasKeluarFields.style.display = "none";
      kasKeluarAkun.value = "";
      kasKeluarJumlah.value = "";
      kasKeluarKet.value = "";
      kasKeluarBukti.value = "";
    });

    function updatePreview(data) {
      const rows = [
        ["Tanggal", data.tanggal],
        ["Jenis", data.jenis.replace("-", " ")],
        ["Kas Masuk dari", data.sumber],
        ["Jumlah", data.jumlah ? "Rp " + data.jumlah : "-"],
        ["Transfer dari", data.bank],
        ["Keterangan", data.keterangan],
        ["Bukti Transfer", data.bukti]
      ];

      document.getElementById("previewBody").innerHTML = rows.map(r => `
        <tr>
          <td style="padding:8px;border-bottom:1px solid #f1f5f9;width:35%;">${r[0]}</td>
          <td style="padding:8px;border-bottom:1px solid #f1f5f9;">${r[1] || "-"}</td>
        </tr>
      `).join("");
    }
  </script>
</body>
</html>
