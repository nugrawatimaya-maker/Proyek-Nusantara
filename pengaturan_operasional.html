<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Pengaturan - Dashboard Operasional</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .dashboard-container {
      display: flex;
      height: 100vh;
    }

    .sidebar {
      width: 250px;
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      overflow-y: auto;
    }

    .sidebar h2 {
      margin-bottom: 20px;
      font-size: 20px;
    }

    .sidebar ul {
      list-style: none;
    }

    .sidebar ul li {
      margin: 10px 0;
    }

    .sidebar ul li a {
      color: white;
      text-decoration: none;
      display: block;
      padding: 10px;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .sidebar ul li a:hover,
    .sidebar ul li a.active {
      background-color: #34495e;
    }

    .main-content {
      flex: 1;
      padding: 30px;
      background-color: #ecf0f1;
      overflow-y: auto;
    }

    .header-dashboard {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .header-dashboard h1 {
      font-size: 28px;
      color: #2c3e50;
    }

    .logout-btn {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s ease;
    }

    .logout-btn:hover {
      background-color: #c0392b;
    }

    /* Form Styles */
    .form-container {
      background-color: white;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      max-width: 600px;
    }

    .form-container h2 {
      color: #2c3e50;
      margin-bottom: 20px;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #2c3e50;
      font-weight: 500;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #bdc3c7;
      border-radius: 4px;
      font-size: 14px;
      font-family: inherit;
    }

    .form-group textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
    }

    .form-buttons {
      display: flex;
      gap: 10px;
      margin-top: 25px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.3s ease;
    }

    .btn-save {
      background-color: #27ae60;
      color: white;
    }

    .btn-save:hover {
      background-color: #229954;
    }

    .btn-cancel {
      background-color: #95a5a6;
      color: white;
    }

    .btn-cancel:hover {
      background-color: #7f8c8d;
    }

    .btn-add {
      background-color: #3498db;
      color: white;
      margin-bottom: 20px;
    }

    .btn-add:hover {
      background-color: #2980b9;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #ecf0f1;
    }

    .tab-btn {
      padding: 12px 20px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      color: #7f8c8d;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
    }

    .tab-btn.active {
      color: #3498db;
      border-bottom-color: #3498db;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .data-list {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .data-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      border: 1px solid #ecf0f1;
      border-radius: 4px;
      margin-bottom: 10px;
      background-color: #f9f9f9;
    }

    .data-item:hover {
      background-color: #f0f0f0;
    }

    .data-item-info {
      flex: 1;
    }

    .data-item-actions {
      display: flex;
      gap: 10px;
    }

    .btn-edit, .btn-delete {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: background-color 0.3s ease;
    }

    .btn-edit {
      background-color: #3498db;
      color: white;
    }

    .btn-edit:hover {
      background-color: #2980b9;
    }

    .btn-delete {
      background-color: #e74c3c;
      color: white;
    }

    .btn-delete:hover {
      background-color: #c0392b;
    }

    .success-message {
      background-color: #d4edda;
      color: #155724;
      padding: 12px;
      border-radius: 4px;
      margin-bottom: 20px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>Menu</h2>
      <ul>
        <li><a href="dashboard_operasional.html">Dashboard</a></li>
        <li><a href="#project">Proyek</a></li>
        <li><a href="#laporan">Laporan</a></li>
        <li><a href="#inventory">Inventory</a></li>
        <li><a href="#pembelian">Pembelian</a></li>
        <li><a href="#tim">Tim Kerja</a></li>
        <li><a href="pengaturan_operasional.html" class="active">Pengaturan</a></li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="header-dashboard">
        <h1>Pengaturan Data Operasional</h1>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>

      <div class="success-message" id="successMessage">Data berhasil disimpan!</div>

      <!-- Tab Navigation -->
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('proyek')">Proyek</button>
        <button class="tab-btn" onclick="switchTab('tim')">Tim Kerja</button>
        <button class="tab-btn" onclick="switchTab('inventory')">Inventory</button>
        <button class="tab-btn" onclick="switchTab('pembelian')">Permintaan Pembelian</button>
      </div>

      <!-- Tab: Proyek -->
      <div id="proyek" class="tab-content active">
        <div class="form-container">
          <h2>Tambah Proyek Baru</h2>
          <form id="proyekForm">
            <div class="form-group">
              <label for="proyekNama">Nama Proyek</label>
              <input type="text" id="proyekNama" placeholder="Contoh: Proyek Perumahan A" required>
            </div>
            <div class="form-group">
              <label for="proyekLokasi">Lokasi</label>
              <input type="text" id="proyekLokasi" placeholder="Contoh: Jakarta Utara" required>
            </div>
            <div class="form-group">
              <label for="proyekStatus">Status</label>
              <select id="proyekStatus" required>
                <option value="">-- Pilih Status --</option>
                <option value="Planning">Planning</option>
                <option value="Ongoing">Ongoing</option>
                <option value="Completed">Completed</option>
              </select>
            </div>
            <div class="form-group">
              <label for="proyekProgress">Progress (%)</label>
              <input type="number" id="proyekProgress" min="0" max="100" placeholder="0-100" required>
            </div>
            <div class="form-group">
              <label for="proyekDeadline">Deadline</label>
              <input type="date" id="proyekDeadline" required>
            </div>
            <div class="form-buttons">
              <button type="submit" class="btn btn-save">Simpan Proyek</button>
              <button type="reset" class="btn btn-cancel">Bersihkan</button>
            </div>
          </form>
        </div>

        <div class="data-list">
          <h3>Daftar Proyek</h3>
          <div id="proyekList"></div>
        </div>
      </div>

      <!-- Tab: Tim Kerja -->
      <div id="tim" class="tab-content">
        <div class="form-container">
          <h2>Tambah Anggota Tim</h2>
          <form id="timForm">
            <div class="form-group">
              <label for="timNama">Nama Anggota</label>
              <input type="text" id="timNama" placeholder="Contoh: Budi Santoso" required>
            </div>
            <div class="form-group">
              <label for="timPosisi">Posisi</label>
              <input type="text" id="timPosisi" placeholder="Contoh: Supervisor" required>
            </div>
            <div class="form-group">
              <label for="timDepartemen">Departemen</label>
              <select id="timDepartemen" required>
                <option value="">-- Pilih Departemen --</option>
                <option value="Konstruksi">Konstruksi</option>
                <option value="Logistik">Logistik</option>
                <option value="Quality Control">Quality Control</option>
                <option value="Keselamatan">Keselamatan Kerja</option>
              </select>
            </div>
            <div class="form-group">
              <label for="timKontak">Nomor Kontak</label>
              <input type="tel" id="timKontak" placeholder="Contoh: 08123456789" required>
            </div>
            <div class="form-buttons">
              <button type="submit" class="btn btn-save">Simpan Anggota</button>
              <button type="reset" class="btn btn-cancel">Bersihkan</button>
            </div>
          </form>
        </div>

        <div class="data-list">
          <h3>Daftar Tim Kerja</h3>
          <div id="timList"></div>
        </div>
      </div>

      <!-- Tab: Inventory -->
      <div id="inventory" class="tab-content">
        <div class="form-container">
          <h2>Tambah Item Inventory</h2>
          <form id="inventoryForm">
            <div class="form-group">
              <label for="invNama">Nama Item</label>
              <input type="text" id="invNama" placeholder="Contoh: Semen Gresik" required>
            </div>
            <div class="form-group">
              <label for="invKategori">Kategori</label>
              <select id="invKategori" required>
                <option value="">-- Pilih Kategori --</option>
                <option value="Material">Material</option>
                <option value="Peralatan">Peralatan</option>
                <option value="PPE">PPE (Personal Protective Equipment)</option>
                <option value="Lainnya">Lainnya</option>
              </select>
            </div>
            <div class="form-group">
              <label for="invJumlah">Jumlah Stok</label>
              <input type="number" id="invJumlah" min="0" placeholder="0" required>
            </div>
            <div class="form-group">
              <label for="invSatuan">Satuan</label>
              <input type="text" id="invSatuan" placeholder="Contoh: Sak, Buah, Bungkus" required>
            </div>
            <div class="form-buttons">
              <button type="submit" class="btn btn-save">Simpan Item</button>
              <button type="reset" class="btn btn-cancel">Bersihkan</button>
            </div>
          </form>
        </div>

        <div class="data-list">
          <h3>Daftar Inventory</h3>
          <div id="inventoryList"></div>
        </div>
      </div>

      <!-- Tab: Permintaan Pembelian -->
      <div id="pembelian" class="tab-content">
        <div class="form-container">
          <h2>Tambah Permintaan Pembelian</h2>
          <form id="pembelianForm">
            <div class="form-group">
              <label for="pmbNama">Nama Barang</label>
              <input type="text" id="pmbNama" placeholder="Contoh: Besi Beton" required>
            </div>
            <div class="form-group">
              <label for="pmbJumlah">Jumlah</label>
              <input type="number" id="pmbJumlah" min="1" placeholder="1" required>
            </div>
            <div class="form-group">
              <label for="pmbPriority">Prioritas</label>
              <select id="pmbPriority" required>
                <option value="">-- Pilih Prioritas --</option>
                <option value="Urgent">Urgent</option>
                <option value="High">High</option>
                <option value="Normal">Normal</option>
                <option value="Low">Low</option>
              </select>
            </div>
            <div class="form-group">
              <label for="pmbKeterangan">Keterangan</label>
              <textarea id="pmbKeterangan" placeholder="Keterangan atau tujuan pembelian..."></textarea>
            </div>
            <div class="form-buttons">
              <button type="submit" class="btn btn-save">Kirim Permintaan</button>
              <button type="reset" class="btn btn-cancel">Bersihkan</button>
            </div>
          </form>
        </div>

        <div class="data-list">
          <h3>Daftar Permintaan Pembelian</h3>
          <div id="pembelianList"></div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Tab switching
    function switchTab(tabName) {
      const tabs = document.querySelectorAll('.tab-content');
      const tabBtns = document.querySelectorAll('.tab-btn');
      
      tabs.forEach(tab => tab.classList.remove('active'));
      tabBtns.forEach(btn => btn.classList.remove('active'));
      
      document.getElementById(tabName).classList.add('active');
      event.target.classList.add('active');
    }

    // Local Storage untuk menyimpan data
    function saveData(key, data) {
      localStorage.setItem(key, JSON.stringify(data));
      showSuccess();
    }

    function getData(key) {
      const data = localStorage.getItem(key);
      return data ? JSON.parse(data) : [];
    }

    function showSuccess() {
      const msg = document.getElementById('successMessage');
      msg.style.display = 'block';
      setTimeout(() => {
        msg.style.display = 'none';
      }, 3000);
    }

    // Form Proyek
    document.getElementById('proyekForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const proyek = {
        id: Date.now(),
        nama: document.getElementById('proyekNama').value,
        lokasi: document.getElementById('proyekLokasi').value,
        status: document.getElementById('proyekStatus').value,
        progress: document.getElementById('proyekProgress').value,
        deadline: document.getElementById('proyekDeadline').value
      };

      const daftarProyek = getData('daftarProyek');
      daftarProyek.push(proyek);
      saveData('daftarProyek', daftarProyek);
      
      this.reset();
      displayProyek();
    });

    function displayProyek() {
      const proyekList = document.getElementById('proyekList');
      const daftarProyek = getData('daftarProyek');
      
      proyekList.innerHTML = '';
      daftarProyek.forEach(proyek => {
        proyekList.innerHTML += `
          <div class="data-item">
            <div class="data-item-info">
              <strong>${proyek.nama}</strong><br>
              Lokasi: ${proyek.lokasi} | Status: ${proyek.status} | Progress: ${proyek.progress}% | Deadline: ${proyek.deadline}
            </div>
            <div class="data-item-actions">
              <button class="btn-delete" onclick="deleteProyek(${proyek.id})">Hapus</button>
            </div>
          </div>
        `;
      });
    }

    function deleteProyek(id) {
      if (confirm('Yakin ingin menghapus proyek ini?')) {
        let daftarProyek = getData('daftarProyek');
        daftarProyek = daftarProyek.filter(p => p.id !== id);
        saveData('daftarProyek', daftarProyek);
        displayProyek();
      }
    }

    // Form Tim Kerja
    document.getElementById('timForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const tim = {
        id: Date.now(),
        nama: document.getElementById('timNama').value,
        posisi: document.getElementById('timPosisi').value,
        departemen: document.getElementById('timDepartemen').value,
        kontak: document.getElementById('timKontak').value
      };

      const daftarTim = getData('daftarTim');
      daftarTim.push(tim);
      saveData('daftarTim', daftarTim);
      
      this.reset();
      displayTim();
    });

    function displayTim() {
      const timList = document.getElementById('timList');
      const daftarTim = getData('daftarTim');
      
      timList.innerHTML = '';
      daftarTim.forEach(tim => {
        timList.innerHTML += `
          <div class="data-item">
            <div class="data-item-info">
              <strong>${tim.nama}</strong><br>
              Posisi: ${tim.posisi} | Departemen: ${tim.departemen} | Kontak: ${tim.kontak}
            </div>
            <div class="data-item-actions">
              <button class="btn-delete" onclick="deleteTim(${tim.id})">Hapus</button>
            </div>
          </div>
        `;
      });
    }

    function deleteTim(id) {
      if (confirm('Yakin ingin menghapus anggota tim ini?')) {
        let daftarTim = getData('daftarTim');
        daftarTim = daftarTim.filter(t => t.id !== id);
        saveData('daftarTim', daftarTim);
        displayTim();
      }
    }

    // Form Inventory
    document.getElementById('inventoryForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const inventory = {
        id: Date.now(),
        nama: document.getElementById('invNama').value,
        kategori: document.getElementById('invKategori').value,
        jumlah: document.getElementById('invJumlah').value,
        satuan: document.getElementById('invSatuan').value
      };

      const daftarInventory = getData('daftarInventory');
      daftarInventory.push(inventory);
      saveData('daftarInventory', daftarInventory);
      
      this.reset();
      displayInventory();
    });

    function displayInventory() {
      const inventoryList = document.getElementById('inventoryList');
      const daftarInventory = getData('daftarInventory');
      
      inventoryList.innerHTML = '';
      daftarInventory.forEach(inv => {
        inventoryList.innerHTML += `
          <div class="data-item">
            <div class="data-item-info">
              <strong>${inv.nama}</strong><br>
              Kategori: ${inv.kategori} | Stok: ${inv.jumlah} ${inv.satuan}
            </div>
            <div class="data-item-actions">
              <button class="btn-delete" onclick="deleteInventory(${inv.id})">Hapus</button>
            </div>
          </div>
        `;
      });
    }

    function deleteInventory(id) {
      if (confirm('Yakin ingin menghapus item ini?')) {
        let daftarInventory = getData('daftarInventory');
        daftarInventory = daftarInventory.filter(i => i.id !== id);
        saveData('daftarInventory', daftarInventory);
        displayInventory();
      }
    }

    // Form Pembelian
    document.getElementById('pembelianForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const pembelian = {
        id: Date.now(),
        nama: document.getElementById('pmbNama').value,
        jumlah: document.getElementById('pmbJumlah').value,
        priority: document.getElementById('pmbPriority').value,
        keterangan: document.getElementById('pmbKeterangan').value,
        tanggal: new Date().toLocaleDateString('id-ID'),
        status: 'Menunggu Approval'
      };

      const daftarPembelian = getData('daftarPembelian');
      daftarPembelian.push(pembelian);
      saveData('daftarPembelian', daftarPembelian);
      
      this.reset();
      displayPembelian();
    });

    function displayPembelian() {
      const pembelianList = document.getElementById('pembelianList');
      const daftarPembelian = getData('daftarPembelian');
      
      pembelianList.innerHTML = '';
      daftarPembelian.forEach(pmb => {
        pembelianList.innerHTML += `
          <div class="data-item">
            <div class="data-item-info">
              <strong>${pmb.nama}</strong><br>
              Jumlah: ${pmb.jumlah} | Prioritas: ${pmb.priority} | Tanggal: ${pmb.tanggal} | Status: ${pmb.status}<br>
              Keterangan: ${pmb.keterangan}
            </div>
            <div class="data-item-actions">
              <button class="btn-delete" onclick="deletePembelian(${pmb.id})">Hapus</button>
            </div>
          </div>
        `;
      });
    }

    function deletePembelian(id) {
      if (confirm('Yakin ingin menghapus permintaan ini?')) {
        let daftarPembelian = getData('daftarPembelian');
        daftarPembelian = daftarPembelian.filter(p => p.id !== id);
        saveData('daftarPembelian', daftarPembelian);
        displayPembelian();
      }
    }

    function logout() {
      if (confirm("Apakah Anda yakin ingin logout?")) {
        window.location.href = "Index.html";
      }
    }

    // Load data saat halaman dibuka
    window.addEventListener('load', function() {
      displayProyek();
      displayTim();
      displayInventory();
      displayPembelian();
    });
  </script>
</body>
</html>
